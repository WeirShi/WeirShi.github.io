(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{405:function(t,s,n){"use strict";n.r(s);var a=n(45),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"object-prototype-tostring-call-在使用该api时-为什么要加call方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#object-prototype-tostring-call-在使用该api时-为什么要加call方法"}},[t._v("#")]),t._v(" "),n("code",[t._v("Object.prototype.toString.call")]),t._v(" 在使用该API时，为什么要加call方法？")]),t._v(" "),n("p",[t._v("我们都知道call方法是用来改变this指向的，也就是讲传入的数据最终this都指到Object上去。")]),t._v(" "),n("p",[t._v("然而我们都知道很多数据都有"),n("code",[t._v("toString")]),t._v("方法，比如"),n("code",[t._v("Object")]),t._v("对象自己本身也是有"),n("code",[t._v("toString")]),t._v("方法的，然而只有"),n("code",[t._v("Object.prototype.toString.call")]),t._v("才会返回数据的类型。")]),t._v(" "),n("p",[n("img",{attrs:{src:"/assets/images/tostring.jpg",alt:"toString"}})]),t._v(" "),n("p",[t._v("从控制台的打印输出来看，每种数据的"),n("code",[t._v("toString")]),t._v("方法都是将传入的数据转成字符串后输出，而"),n("code",[t._v("obj")]),t._v("调用了"),n("code",[t._v("toString")]),t._v("方法转变后的格式和"),n("code",[t._v("Object.prototype.toString")]),t._v("是一样的，可以说明"),n("code",[t._v("obj")]),t._v("很有可能调用的就是"),n("code",[t._v("Object.prototype")]),t._v("上的"),n("code",[t._v("toString")]),t._v("方法\n然而我们纯粹的调用了一下"),n("code",[t._v("Object.toString()")]),t._v("，却发现输出的结果是"),n("code",[t._v("function Object() { [native code] }")]),t._v("，说明"),n("code",[t._v("Object")]),t._v("对象中的"),n("code",[t._v("toString")]),t._v("函数与其原型链上的"),n("code",[t._v("toString")]),t._v("函数并不是同一个函数.")]),t._v(" "),n("p",[t._v("在JS中，所有的类或者构造函数，向上追溯原型链时，我们可以发现最终都会是"),n("code",[t._v("Object")]),t._v("，但是由于"),n("code",[t._v("Array")]),t._v(","),n("code",[t._v("Function")]),t._v("等改写了"),n("code",[t._v("toString")]),t._v("方法，因此在我们想做类型判断时只能使用"),n("code",[t._v("Object.prototype.toString.call")]),t._v("方法，使用call函数改变this指向后正确输出了类型字符串。")]),t._v(" "),n("p",[t._v("我们可以做如下操作来进行验证")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义一个数组")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" arr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查数组原型上是否具有 toString() 方法")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'toString'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用数组的 toString() 方法")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '1,2,3'")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// delete操作符删除数组原型上的 toString()")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toString\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除后，再检查数组原型上是否还具有 toString() 方法")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'toString'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//false")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除后的数组再次使用 toString() 时，会向上层访问这个方法，即 Object 的 toString()")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '[object Array]'")]),t._v("\n\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);